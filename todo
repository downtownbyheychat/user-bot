TODO: your order of {ID} has been delivered, accepted, received status
TODO: 3 action buttons for partial validation of direct order
cancel:
proceed without missing item and
modify: prompt for what would you like to add
added item is not validated : loop back 3 buttons

DONE: use onboarding flow for OTP
Check your mail for your code as the message after the

Downtown â€“ User-End Chatbot
Project Overview
This document outlines the deliverables and functional workflow for Downtown User-End Chatbot.
The chatbot is designed to enable users to send food orders seamlessly through conversational text. The system interprets user input, extracts essential details (vendor, food items, and delivery location), and structures the data in a machine-readable JSON format for backend processing.

System Logic & Flow
Vendor, Food, and Location Extraction
The model must accurately extract:
â€¢ Vendor name

â€¢ Food item(s)

â€¢ quantity

If any of these elements are missing, the chatbot will apply conditional logic (outlined below)

Chatbot Decision Logic (Requirements for DO)
Condition System Action / Response
Vendor provided only Return the vendorâ€™s catalogue (list of available foods, pack limits, and prices).
Vendor missing, but food + quantity provided Search for the food item across all vendors in the database, then return a list of vendors offering that item.
Food item has minimum and maximum limits (e.g., â€œ200-1500 for riceâ€) Validate that the requested order falls within price/quantity limits.
User orders a per pack item and a per price item together Do not proceed to catalogue or direct order (flag for validation).
After order validation Ask the user: â€œPickup or Delivery?â€
If Pickup selected Display Order Summary for confirmation.
If Delivery selected Prompt user for delivery location, then confirm summary.

Catalogue & Database Querying
â€¢ After successfully extracting order details, the system queries the vendor database using the provided vendor ID.

â€¢ If the vendor or item lookup fails, the chatbot defaults to using the catalogue system.

â€¢ The catalogue defines:

o Each food item

Expected Outputs
Successful Order Parsing
â€¢ AI returns structured JSON ready for backend.

Fallback to Catalogue
â€¢ If vendor data is incomplete, system fetches food catalogue to guide of that vendor

Order Confirmation Stage
â€¢ Chatbot displays:

o Delivery or pickup options

o Final confirmation prompt

o Order summary (vendor, items, total)

Deliverables Summary
Deliverable Description
Chatbot text parsing logic Extract vendor, food, quantity, and location from user text.
JSON structuring engine Converts extracted data into key-value JSON format.
Catalogue integration Fallback mechanism for missing vendor/food data.
Database querying module Fetch vendor details and item availability.
Order validation rules Check per pack vs per price logic, quantity limits, and price range.
Confirmation workflow Handles pickup/delivery options and final order confirmation.

So basically for things like jollof rice that are sold at per price, the quantity are usually measured in terms of the price e.g 800 jollof rice, they have starting prices and increase in multiple of 100 naira, we donâ€™t want a situation when user enter quantities less than theÂ startingÂ amount
When a user orders a full pack or half pack food it doesnâ€™t need to include pack price again in theÂ orderÂ summary
Sale quantity is

1. Per price: the current price of items sold per portion as starting price, mostly used for items sold as quantities
2. â per piece: used for things like drink snack and food items.
3. â full pack: used for things that are sold as combos or food
4. â half pack : a cheaper and less more alternativeÂ forÂ fullÂ pack

TODO: Intent Handling
: Greeting Response:
Sup {{WhatsApp name}},
Welcome back to Downtown, where you chat, order, and eat fast.

    : About Company Response:
        ğŸ˜ Canâ€™t say much about that one right now, But you can vibe with us on downtown.ng
        or join #thehashtag WhatsApp channel, we drop daily updates there.

    : Customer Service Response:
        Oops ğŸ˜… sounds like you need a hand!
        Our support teams got you, just send a quick mail to help@downtown.ng
        and someone will get back to you fast âš¡

    TODO: Reordering Response:
        No Wahala, you can reorder your last meal in one tap.
        Tap â€œReorderâ€ below to bring back your previous order
        Action Button 1: ReorderğŸ”

    TODO: Find Restaurant Response:
        -	Right now, we deliver from a few spots around campus.
        You fit type â€œshow restaurantsâ€ to see where you can order from

        â€¦After Typing Show restaurants

        Action Button List: Available Vendors

    TODO: Order Cancellation Response:
        state: When user asks to cancel (within 2 min 30 sec)
            Got it! Youâ€™re still within the 2 min 30 sec grace window, so your order can be canceled ğŸ‘Œ
            Want me to go ahead and cancel it?
            Action Button 1: Cancel OrderğŸ‘

Greeting Response:
Sup {{WhatsApp name}},
Welcome back to Downtown, where you chat, order, and eat fast.

About Company Response:
ğŸ˜ Canâ€™t say much about that one right now, But you can vibe with us on downtown.ng
or join #thehashtag WhatsApp channel, we drop daily updates there.

Customer Service Response:
Oops ğŸ˜… sounds like you need a hand!
Our support teams got you, just send a quick mail to help@downtown.ng
and someone will get back to you fast âš¡

Reordering Response:
No Wahala, you can reorder your last meal in one tap.
Tap â€œReorderâ€ below to bring back your previous order
Action Button 1: ReorderğŸ”

Find Restaurant Response:

- Right now, we deliver from a few spots around campus.
  You fit type â€œshow restaurantsâ€ to see where you can order from

â€¦After Typing Show restaurants

Action Button List: Available Vendors

Order Cancellation Response:
state: When user asks to cancel (within 2 min 30 sec)  
Got it! Youâ€™re still within the 2 min 30 sec grace window, so your order can be canceled ğŸ‘ŒğŸ½
Want me to go ahead and cancel it?
Action Button 1: Cancel OrderğŸ‘

â€¦After Clicking Cancel Order
Done âœ… Your orderâ€™s been canceled successfully.
Refund will be processed within {{refund time}} hours ğŸ’¸
Wanna try placing a new one?

state: When user tries to cancel after 2 min 30 sec
Hmmâ€¦ looks like your 2 min 30 sec window has passed ğŸ˜•
At this stage, your orderâ€™s already in progress and canâ€™t be canceled.
You can still let us know what went wrong, weâ€™ll see how best to help.

Order Modification Response:
state: When user tries to modify an active order (within 2 min 30 sec)
Sure thing! Youâ€™re still within your 2 min 30 sec window, so we can make changes to your order

â€¦Order Modified
All set âœ¨ Your orderâ€™s been updated!
{{updated order summary}}

state: When user tries to modify after 2min 30sec window
Hey, it looks like your 2 min 30 sec window has closed ğŸ˜•
Your orderâ€™s already being processed, so we canâ€™t make changes at this point.
You can still re-order or let me know what went wrong, weâ€™ll see what can be done.

View Balance Response:
state: When user asks to view balance and hasnâ€™t created a wallet
Looks like you donâ€™t have a Downtown wallet yet ğŸ‘€
You can set it up in seconds, just tap â€œCreate Walletâ€ below to get started.
Action Button 1: Create Wallet

state: When user asks to view balance and has created a wallet
Sure thing boss, ğŸ‘
Your Downtown wallet balance is â‚¦ {{balance amount}}
You can use it for orders, tips, or quick re-ups anytime

state: When wallet service is down
Walletâ€™s taking a little nap right now ğŸ˜´
Try checking again in a few minutes, weâ€™re on it.

Fund Wallet Response:
state: When user asks to fund wallet or account details and has created wallet
Here are your wallet details ğŸ‘‡
Account Name: {{Wallet Name}}
Account Number: {{Wallet Account Number}}
Bank: {{Wallet Bank}}
Action Button 1: Copy Account Number

state: When user asks to fund wallet and hasnâ€™t created a wallet
Looks like you donâ€™t have a Downtown wallet yet ğŸ‘€
You can set it up in seconds, just tap â€œCreate Walletâ€ below to get started.
Action Button 1: Create Wallet

â€¦Immediately after wallet creation
Here are your wallet details ğŸ‘‡
Account Name: {{Wallet Name}}
Account Number: {{Wallet Account Number}}
Bank: {{Wallet Bank}}
Action Button 1: Copy Account Number
INITIATED RESPONSE BASED ON BACKGROUND PROCESSES

State: Order Just Placed
Got it! Your order has been received ğŸ§¾
Weâ€™ll confirm with the restaurant and update you shortly.

state: Preparing Order
Your order is being prepared by {{vendor name}} ğŸ‘¨ğŸ½â€ğŸ³ğŸ”¥
It smells good already ğŸ˜‹, weâ€™ll ping you when itâ€™s out for delivery.

state: Out for Delivery
Your order is on its way! ğŸš´â€â™‚ï¸ğŸ’¨
rider just picked it up; you can expect delivery in about 7-10 mins.

state: Delayed Order
Hey ğŸ‘‹ just a heads-up, your deliveryâ€™s taking a little longer than expected ğŸ˜“
Our chefs are still on it though, 5mins. Thanks for your patience â¤ï¸

state: Delivered Order
Your Order has been delivered.

state: Insufficient Wallet Balance
Your wallet balance isnâ€™t enough for this order.
Please top up.
Action Button 1: Top Up Wallet
â€¦Top Up Button selected
Here are your wallet details ğŸ‘‡
Account Name: {{Wallet Name}}
Account Number: {{Wallet Account Number}}
Bank: {{Wallet Bank}}
Action Button 1: Copy Account Number

state: Wallet funded successfully
Alert!ğŸ‰ğŸ‰ğŸ‰ you were credited â‚¦{{credit amount},
your new balance is â‚¦{{balance amount}},

state: User hasnâ€™t created wallet yet and wants to pay

Hereâ€™s your unique payment account for this order ğŸ‘‡Send â‚¦{{total amount}} to complete your payment. ğŸ’¸
Account Name: {{Account Name}}
Account Number: {{Bank Account Number}}
Bank: {{Bank Name}}
Once youâ€™ve sent it, tap â€œSentâ€ so we can confirm your payment right away. âœ…
Action Button 1: Copy Account Number
Action Button 2: Sent

state: User has Paid for Order
Here is your receipt, ğŸ“ƒğŸ“ƒ
{{Receipt_image.png}}

state: Wallet Payment confirmation
Please confirm your payment of â‚¦ {{Total Payment}} to complete your order.
Action Button 1: Confirm Payment

state: User hasnâ€™t created a wallet yet after two orders
You donâ€™t have a Downtown wallet yet.
Create one to start paying faster and earn cashback on every order. ğŸ’¸
Action Button 1: Create Wallet
Action Button 2: Donâ€™t Show Again

state: User just completed Onboarding
Hey there! Iâ€™m Downtown, your go-to food ordering buddy ğŸ½ï¸. Iâ€™m here to make your everyday meals super easy and stress-free
â€¦After Onboarding message
Alrighty Say what you want: (â€œe.g., jollof rice 800 from African Kitchenâ€)

state: Chatbot failed to process food name
Hmmâ€¦ we couldnâ€™t find that meal.
Here are some dishes you can order from this vendor ğŸ‘‡
Action Button 1: View Menu ğŸ©

state: User just Onboarded
Wanna go ahead and place an order? ğŸ˜‹
Tap Yes to confirm or No to cancel.
Action Button 1: Yesâœ…
Action Button 2: NoâŒ

state: Chatbot failed to process multiple food quantity
Oops! you didnâ€™t specify the quantity of food Mind sending it again, like this: â€˜800 jollof rice, plantain 200 and one egg from {{Restaurant Name}}â€™? Iâ€™ll be ready to place your order once Iâ€™ve got the full details!

state: Chatbot failed to process food quantity of single item
How much {{Food name}} do you want
How many {{Food name}} do you want

state: Chatbot failed to process merchant name
â€œHmm, we donâ€™t seem to have that merchant yet.â€
Double-check the name or pick from available ones below ğŸ‘‡
Action Button 1: Available MERCHANT Name

state: Merchant exist but isnâ€™t onboarded
This merchant isnâ€™t on Downtown yet.
Weâ€™re expanding fast, stay tuned or try another restaurant near youğŸ”¥
Action Button 1: Available MERCHANTS

state: Merchant exist but hasnâ€™t opened
âš  Looks like this vendor isnâ€™t available now.
Try again later or pick another spot near you ğŸ½
Action Button 1: Available MERCHANTS

state: Choose option after food and merchant has been processed
Quick one, you want it dropped off or youâ€™ll grab it?
Action Button 1: PickupğŸš²
Action Button 2: Delivery ğŸ“¦

state: User selected delivery as option
Where do you want your food delivered to?

state: Order Summary for Pickup with no pack
ğŸ“ƒYOUR ORDER RECAP FROM {{Vendor Name}}
ğŸ›ï¸Food:
Chicken Shawarma *2 = â‚¦1500 each
Zobo Drink *1= â‚¦500
\*Service Fee = â‚¦50
PICK UP
â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦
Total: â‚¦3550
Action Button 1: Proceed to pay
Action Button 2: Add new pack
Action Button 3: cancel

NOTE:PACK FEE SHOULD ONLY BE INCLUDED WHEN FOOD OR SOUP IS INCLUDED IN THE ORDER SUMMARY

state: Order Summary for Pickup with pack
ğŸ“ƒYOUR ORDER RECAP FROM {{Vendor Name}}
ğŸ›ï¸Food:
Jollof Rice _800 = â‚¦800
Egg_ 1= â‚¦250
Zobo Drink *1= â‚¦500 each
Pack: 200
*Service Fee = â‚¦50
PICK UP
â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦
Total: â‚¦1800
Action Button 1: Proceed to pay
Action Button 2: Add new pack
Action Button 3: cancel

state: Order Summary for Delivery
ğŸ“ƒYOUR ORDER RECAP FROM {{Vendor Name}}
Location: {{Location Provided}}
ğŸ›ï¸Food:
Jollof Rice _800 = â‚¦800
Egg_ 1= â‚¦250
Zobo Drink *1= â‚¦500 each
Pack: 200
*Service Fee = â‚¦100
DELIVERY
â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦
Total: â‚¦1800
Action Button 1: Proceed to pay
Action Button 2: Add new pack
Action Button 3: cancel

state: Order Summary for Multiple Orders
ğŸ“ƒYOUR 1st ORDER RECAP FROM {{Vendor Name}}
Location: {{Location Provided}}
ğŸ›ï¸Food:
Jollof Rice _800 = â‚¦800
Egg_ 1= â‚¦250
Zobo Drink \*1= â‚¦500 each
Pack: 200
DELIVERY

---

ğŸ“ƒYOUR 2nd ORDER RECAP FROM {{Vendor Name}}
ğŸ›ï¸Food:
Jollof Rice _800 = â‚¦800
Egg_ 1= â‚¦250
Zobo Drink *1= â‚¦500 each
Pack: 200
PICK UP
*Service Fee = â‚¦300
â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦
Total: â‚¦1800

Action Button 1: Proceed to pay
Action Button 2: Add new pack
Action Button 3: cancel
